{% import "bootstrap/utils.html" as utils %}
{% extends "reporter_base.html" %}
{% block title %}Members{% endblock %}
    {% block body %}
      <div class="container-fluid">
            <div class="card">
                <div class="card-header bg-info">
                      <h3 style="color: #fff;"><b>{{ departments.name }}</b> Cooperative</h3>
                </div>
            <div class="card-body">
            <br/>
        {{ utils.flashed_messages() }}
            <div class="row">
                <div class="col-md-3">
                    <div class="card p-4">
                    <a href="{{ url_for('admin.cooperatives_overall') }}">
                        <div class="card-body d-flex justify-content-between align-items-center">
                            <div>
                                <span class="h4 d-block font-weight-normal mb-2">10</span>
                                <span class="font-weight-light">Total Staff Members</span>
                            </div>
                            <div class="h2 text-muted">
                                <i class="icon icon-user"></i>
                            </div>
                        </div>
                      </a>
                    </div>
                </div>

                <div class="col-md-3">
                    <div class="card p-4">
                        <div class="card-body d-flex justify-content-between align-items-center">
                            <div>
                                <span class="h4 d-block font-weight-normal mb-2">20</span>
                                <span class="font-weight-light">Total Members</span>
                            </div>
                            <div class="h2 text-muted">
                                <i class="icon icon-people"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-3">
                    <div class="card p-4">
                        <div class="card-body d-flex justify-content-between align-items-center">
                            <div>
                                <span class="h4 d-block font-weight-normal mb-2">90</span>
                                <span class="font-weight-light">Male Members</span>
                            </div>
                            <div class="h2 text-muted">
                                <i class="icon icon-cloud-download"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-3">
                    <div class="card p-4">
                        <div class="card-body d-flex justify-content-between align-items-center">
                            <div>
                                <span class="h4 d-block font-weight-normal mb-2">32</span>
                                <span class="font-weight-light">Youth</span>
                            </div>
                            <div class="h2 text-muted">
                                <i class="icon icon-clock"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


<script type="text/javascript">
  $('.alive').easyPieChart({
    easing: 'easeOutCirc',
    barColor: '#1abc9c  ',
    trackColor: '#f9f9f9  ',
    scaleColor:false,
    scaleLength: 5,
    percent:67,
    lineCap: 'round',
    lineWidth: 15, 
    size: 110, 
    animate: {duration: 2000,enabled: true},
    onStep: function(from, to, percent) {$(this.el).find('.percent').text(Math.round(percent));}
  });

function redraw(){
   $('.alive').empty().easyPieChart({
    easing: 'easeOutCirc',
    barColor: '#1abc9c  ',
    trackColor: '#f9f9f9  ',
    scaleColor:false,
    scaleLength: 5,
    percent:67,
    lineCap: 'round',
    lineWidth: 15, 
    size: 50, 
    animate: {duration: 2000,enabled: true},
    onStep: function(from, to, percent) {$(this.el).find('.percent').text(Math.round(percent));}
  });   
}
</script>
        {% if departments %}
<div class="col-md-10">
<ul class="nav nav-tabs" role="tablist">
    <li class="nav-item">
        <a class="nav-link active" data-toggle="tab" href="#home" role="tab" aria-controls="home">General Info</a>
    </li>

    <li class="nav-item">
        <a class="nav-link" data-toggle="tab" href="#profile" role="tab" aria-controls="profile">Address</a>
    </li>

    <li class="nav-item">
        <a class="nav-link" data-toggle="tab" href="#messages" role="tab" aria-controls="messages">Professional</a>
    </li>

    <li class="nav-item">
        <a class="nav-link" data-toggle="tab" href="#subs" role="tab" aria-controls="messages">Subscriptions</a>
    </li>
</ul>

<div class="tab-content">
    <div class="tab-pane active" id="home" role="tabpanel">





            <h3> General Info </h3>
      <table class="table">
            <thead>
            </thead>
            <tbody>
              <tr>
                <td><b>Cooperative name</b></td>
                <td>{{ departments.name }}</td>
              </tr>
              <tr>
                <td><b>All Members</b></td>
                <td>{{ departments.members.count() }} Members</td>
              </tr>
              <tr>
                <td><b>Email</b></td>
                <td>{{ departments.email }}</td>
              </tr>
            <tr>
                <td><b>Registration Date</b></td>
                <td>{{ departments.regdate }}</td>
              </tr>
              <tr>
                <td><b>Cooperative Certificate</b></td>
                <td>{{ departments.certificate }}</td>
              </tr>
              <tr>
                <td><b>Cooperative Activity</b></td>
                <td>{{ departments.activity }}</td>
              </tr>


              <tr>
                <td><b>Cooperative Initial Share</b></td>
                <td>{{ departments.starting_share }}, <b>Rwf</b></td>
              </tr>


            <tr>
                <td><b>Cooperative Descriptions</b></td>
                <td>{{ departments.description }}</td>
              </tr>
              <tr>
                <td><b>Role</b></td>
                <td>Member</td>
              </tr>

            </tbody>
        </table>



     </div>
        <div class="tab-pane" id="profile" role="tabpanel">
          <h3> Address Info </h3>
          <table class="table">
              <thead>
              </thead>
                <tbody>
                  <tr>
                    <td><b>Cooperative Province</b></td>
                    <td>{{ departments.province }}</td>
                  </tr>
                  <tr>
                    <td><b>Cooperative District</b></td>
                    <td>{{ departments.district }} Members</td>
                  </tr>
                  <tr> 
                    <td><b>Cooperative Sector</b></td>
                    <td>{{ departments.sector }}</td>
                  </tr>
                <tr>
                    <td><b>Registration Date</b></td>
                    <td>{{ departments.regdate }}</td>
                  </tr>
                  <tr>
                    <td><b>Cooperative Certificate</b></td>
                    <td>{{ departments.certificate }}</td>
                  </tr>
                  <tr>
                    <td><b>Cooperative Activity</b></td>
                    <td>{{ departments.activity }}</td>
                  </tr>

                <tr>
                    <td><b>Cooperative Descriptions</b></td>
                    <td>{{ departments.description }}</td>
                  </tr>
                  <tr>
                    <td><b>Role</b></td>
                    <td>Member</td>
                  </tr>
                </tbody>
            </table>
          </div>

          
          <div class="tab-pane" id="messages" role="tabpanel">
          <h3> Professional Info </h3>
          <table class="table">
              <thead>
              </thead>
                <tbody>
                  <tr>
                    <td><b>Cooperative activities</b></td>
                    <td>{{ departments.province }}</td>
                  </tr>
                  <tr>
                    <td><b>Cooperative Email</b></td>
                    <td>{{ departments.district }} Members</td>
                  </tr>
                  <tr> 
                    <td><b>Cooperative Descriptions</b></td>
                    <td>{{ departments.sector }}</td>
                  </tr>
                <tr>
                    <td><b>Registration Date</b></td>
                    <td>{{ departments.regdate }}</td>
                  </tr>
                  <tr>
                    <td><b>Cooperative Certificate</b></td>
                    <td>{{ departments.certificate }}</td>
                  </tr>
                  <tr>
                    <td><b>Cooperative Activity</b></td>
                    <td>{{ departments.activity }}</td>
                  </tr>
                <tr>
                    <td><b>Cooperative Descriptions</b></td>
                    <td>{{ departments.description }}</td>
                  </tr>
                  <tr>
                    <td><b>Role</b></td>
                    <td>Member</td>
                  </tr>
                </tbody>
            </table>
           </div>





        <div class="tab-pane" id="subs" role="tabpanel">
        <h3> Subscription Info </h3>
            <table class="table">
              <thead>
              </thead>
                <tbody>
                  <tr>
                    <td><b>Subscribed </b></td>
                    <td>{{ departments.province }}</td>
                  </tr>
                  <tr>
                    <td><b>Subscription plan </b></td>
                    <td>{{ departments.district }} Members</td>
                  </tr>
                  <tr> 
                    <td><b>Remaining days </b></td>
                    <td>{{ departments.sector }}</td>
                  </tr>
                <tr>
                    <td><b>Credit card no </b></td>
                    <td>{{ departments.regdate }}</td>
                  </tr>
                  
                  <tr>
                    <td><b>Paid amount </b></td>
                    <td>{{ departments.activity }}</td>
                  </tr>
                  <tr>
                    <td><b>Certificate </b></td>
                    <td>{{ departments.certificate }}</td>
                  </tr>
                  <tr>
                    <td><b>Paid date </b></td>
                    <td>{{ departments.description }}</td>
                  </tr>
                  <tr>
                    <td><b>Descriptions </b></td>
                    <td>{{ departments.description }}</td>
                  </tr>
                </tbody>
            </table>







              </div>
          </div>
      </div>

      <br><br>
      <h1><span><i class="fa fa-users"></i></span> Members</h1><br>
        <table id="example" class="display nowrap" cellspacing="0" width="100%">
        <thead>
            <tr>
                <th>ID</th>
                <th> Name </th>
                <th>Job</th>
                <th>Plate</th>
                <th>Owner</th>
                <th>Phone</th>
                <th>Owner Phone</th>
                <th>More</th>
            </tr>
        </thead>
        <tfoot>
            <tr>
                <th>ID</th>
                <th> Name </th>
                <th>Job</th>
                <th>Plate</th>
                <th>Owner</th>
                <th>Phone</th>
                <th>Owner Phone</th>
                <th>More</th>
            </tr>
        </tfoot>
        <tbody>
            {% for dept in departments.members %}
          <tr>
            <td> {{ dept.id }} </td>
            <td> {{ dept.firstName }} </td>
            <td><span class="label label-default"> {{ dept.secondName }} </span></td>
            <td><span class="label label-primary"> {{ dept.plateNo }} </span></td>
            <td> {{ dept.owner }} </td>
            <td><span class="label label-info"> {{ dept.phone }} </span></td>
            <td><span class="label label-warning"> {{ dept.ownerTel }} </span></td>
            <td> 
              <a href="#">
              <i class="fa fa-eye"></i>View
              </a>
            </td>
          </tr>
              {% endfor %}
        </tbody>
    </table>

    </head>
<!--

            <table class="table table-striped table-bordered">
              <thead>
                <tr>
                  <th width="5%"> # </th>
                  <th width="15%"> Official Name </th>
                  <th width="15%"> Pin number </th>
                  <th width="40%"> Description </th>
                  <th width="15%"> Members' Count </th>
                  <th width="15%"> Edit </th>
                  <th width="15%"> Delete </th>
                </tr>
              </thead>
              <tbody>
                <tr>
                {% if current_user.department %}
                  <td><b>{{ 1 }} </b></td>
                  <td><b> {{ current_user.department.name }} </b></td>
                  <td> {{ current_user.department.description }} </td>
                  {% endif %} 
                  <td>
                    {% if current_user.departments %}
                      {{ current_user.departments.count() }}
                    {% else %}
                      0
                    {% endif %}
                  </td>
                  <td>
                    <a href="{{ url_for('admin.edit_department', id=current_user.department.email) }}">
                      <i class="fa fa-pencil"></i> Edit
                    </a>
                  </td>
                  <td>
                    <a href="{{ url_for('admin.delete_department', id=current_user.department.email) }}">
                      <i class="fa fa-trash"></i> Delete
                    </a>
                  </td>
                </tr>
              </tbody>
            </table>

-->
          </div>
          <div style="text-align: center">
        {% else %}
          <div style="text-align: center">
        <h3> You don't have or belong to any cooperative. </h3><br>
          <a href="{{ url_for('admin.add_department') }}" class="btn btn-default btn-lg">
            <i class="fa fa-plus"></i>
            Create Cooperative
          </a><br><br><br>
          <p>Follow this process to <a href="http://www.rca.gov.rw/spip.php?article89" target="_blank">Register</a> a cooperative</p>
        </div>
        {% endif %}
        <br/><br/><br/>
        <br/><br/><br/>
      </div>
    {% endblock %}
    </div>
  </div>
</div>
</div>























